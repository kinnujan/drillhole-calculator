<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drill Hole Calculator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <button id="drillHoleInfoToggle" class="icon-button"><i class="fas fa-chevron-down"></i></button>
            <div class="spacer"></div>
            <button id="settingsButton" class="icon-button"><i class="fas fa-cog"></i></button>
            <button id="helpButton" class="icon-button"><i class="fas fa-question"></i></button>
        </div>

        <div id="drillHoleInfo" class="collapsible">
            <h2>Drill Hole Information</h2>
            <div class="input-group">
                <label for="holeId">Hole ID:</label>
                <input type="text" id="holeId">
            </div>
            <div class="input-group">
                <label for="holeDip">Hole Dip (°):</label>
                <input type="range" id="holeDipSlider" min="-90" max="90" step="0.1" value="0">
                <input type="number" id="holeDip" min="-90" max="90" step="0.1" value="0">
            </div>
            <div class="input-group">
                <label for="holeAzimuth">Hole Azimuth (°):</label>
                <input type="range" id="holeAzimuthSlider" min="0" max="360" step="0.1" value="0">
                <input type="number" id="holeAzimuth" min="0" max="360" step="0.1" value="0">
            </div>
        </div>

        <div id="drillHoleInfoSummary" class="hidden">
            <span id="holeIdSummary"></span>
            <span id="holeDipSummary"></span>
            <span id="holeAzimuthSummary"></span>
        </div>

        <div id="app">
            <div class="input-section">
                <h2>Measurement</h2>
                <div class="input-group">
                    <label for="depth">Depth (m):</label>
                    <input type="number" id="depth" min="0" step="0.01" value="0">
                </div>
                <div class="depth-buttons">
                    <button class="depth-button" data-amount="-10">-10m</button>
                    <button class="depth-button" data-amount="-1">-1m</button>
                    <button class="depth-button" data-amount="-0.1">-0.1m</button>
                    <button class="depth-button" data-amount="0.1">+0.1m</button>
                    <button class="depth-button" data-amount="1">+1m</button>
                    <button class="depth-button" data-amount="10">+10m</button>
                </div>
                <div class="type-selector"></div>
                <div class="generation-selector"></div>
                <div class="custom-type-selectors"></div>
                <div class="input-group">
                    <label for="alpha">Alpha (°):</label>
                    <input type="range" id="alphaSlider" min="0" max="90" step="1" value="0">
                    <input type="number" id="alpha" min="0" max="90" step="1" value="0">
                </div>
                <div class="input-group">
                    <label for="beta">Beta (°):</label>
                    <input type="range" id="betaSlider" min="0" max="360" step="1" value="0">
                    <input type="number" id="beta" min="0" max="360" step="1" value="0">
                </div>
                
                <div id="preview"></div>
                
                <textarea id="comment" placeholder="Add a comment..."></textarea>
                
                <button id="addMeasurement">Add Measurement</button>
            </div>

            <div class="results-section">
                <h2>Results</h2>
                <table id="resultsTable">
                    <thead>
                        <!-- Table header will be dynamically generated -->
                    </thead>
                    <tbody>
                        <!-- Table body will be dynamically populated -->
                    </tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button id="copyResults">Copy Results</button>
                <button id="saveAsCSV">Save as CSV</button>
                <button id="clearMeasurements">Clear Measurements</button>
            </div>
        </div>

        <div id="settings" class="modal hidden">
            <div class="modal-content">
                <h2>Settings</h2>
                <div class="setting-group">
                    <label for="darkMode">Dark Mode:</label>
                    <input type="checkbox" id="darkMode">
                </div>
                <div class="setting-group">
                    <label for="hapticFeedback">Haptic Feedback:</label>
                    <input type="checkbox" id="hapticFeedback">
                </div>
                <div class="setting-group">
                    <label for="strikeMode">Strike Mode:</label>
                    <select id="strikeMode">
                        <option value="negative">-90° (default)</option>
                        <option value="positive">+90°</option>
                    </select>
                </div>
                <div class="setting-group">
                    <h3>Reset Application</h3>
                    <button id="resetApp" class="danger-button">Reset All Settings and Data</button>
                </div>
                <div class="setting-group">
                    <label>Measurement Types:</label>
                    <div id="measurementTypes"></div>
                    <button id="addMeasurementType">Add Measurement Type</button>
                </div>
                <div class="setting-group">
                    <label>Generation Types:</label>
                    <div id="generationTypes"></div>
                    <button id="addGenerationType">Add Generation Type</button>
                </div>
                <div class="setting-group">
                    <label>Custom Types:</label>
                    <div id="customTypes"></div>
                    <button id="addCustomType">Add Custom Type</button>
                </div>
                <button id="closeSettings" class="close-button">&times;</button>
            </div>
        </div>

        <div id="help" class="modal hidden">
            <div class="modal-content">
                <h2>Help & Information</h2>
                <div class="help-content">
                    <h3>About the App</h3>
                    <p>This app is designed to calculate geological planes from alpha and beta measurements.</p>
                    
                    <h3>Key Features</h3>
                    <ul>
                        <li>Calculate dip and dip direction from alpha and beta measurements</li>
                        <li>Works in browser or as a mobile app</li>
                        <li>Local data storage (saved on your device, not on a server)</li>
                        <li>Export results as CSV</li>
                        <li>Use on-the-fly to convert alpha and beta to real-world orientations</li>
                    </ul>

                    <h3>How to Use</h3>
                    <ol>
                        <li>Enter the Hole ID, Hole Dip, and Hole Azimuth</li>
                        <li>Input the depth of the measurement</li>
                        <li>Measure alpha and beta angles:
                            <ul>
                                <li><strong>Important:</strong> The orientation line must be drawn from the bottom of the core</li>
                                <li>All measurements should be taken from this bottom orientation line</li>
                                <li>Alpha: Measure the angle</li>
                                <li>Beta: Measure the angle around the core circumference, from the orientation line to the down-dip direction of the plane</li>
                            </ul>
                        </li>
                        <li>Select the measurement type and generation</li>
                        <li>Click "Add Measurement" to save the data</li>
                        <li>View results in the table below</li>
                        <li>Use "Copy Results" or "Save as CSV" to export your data</li>
                    </ol>

                    <h3>Data Storage</h3>
                    <p>All data is stored locally on your device. No information is sent to or stored on any external servers.</p>

                    <h3>Offline Use</h3>
                    <p>This app can be installed on your phone and used offline. To install:</p>
                    <ul>
                        <li>On Android: Look for the "Add to Home Screen" prompt</li>
                        <li>On iOS: Use the "Share" button and select "Add to Home Screen"</li>
                    </ul>

                    <h3>Disclaimer</h3>
                    <p>This app is provided "as is", without warranty of any kind. Users are responsible for verifying results for critical applications.</p>
                </div>
                <button id="closeHelp" class="close-button">&times;</button>
            </div>
        </div>

        <div id="copyStatus"></div>
        <div id="error"></div>
    </div>
    <footer>
        <span>Done by Janne v.15</span>
        <div class="social-links">
            <a href="https://www.linkedin.com/in/kinnujan/" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i></a>
            <a href="https://github.com/kinnujan/drillhole-calculator/" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i></a>
            <a href="https://twitter.com/kinnujan" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
        </div>
    </footer>
    <script type="module" src="main.js"></script>
</body>
</html>