<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drill Hole Calculator</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#4CAF50">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="app-title">Drill Hole Calculator</h1>
            <div id="drillHoleInfoSummary" class="hidden">
                <span id="holeIdSummary"></span>
                <span id="holeDipSummary"></span>
                <span id="holeAzimuthSummary"></span>
            </div>
            <div class="header-buttons">
                <button id="drillHoleInfoToggle" class="icon-button"><i class="fas fa-chevron-down"></i></button>
                <button id="settingsButton" class="icon-button"><i class="fas fa-cog"></i></button>
            </div>
        </div>

        <div id="drillHoleInfo" class="collapsible">
            <div class="input-group">
                <label for="holeId">Hole ID:</label>
                <input type="text" id="holeId">
            </div>
            <div class="input-group angle-input">
                <label for="holeDip">Hole Dip (°):</label>
                <input type="number" id="holeDip" min="-90" max="90" step="0.1" value="0" class="angle-number">
                <input type="range" id="holeDipSlider" min="-90" max="90" step="0.1" value="0" class="angle-slider">
            </div>
            <div class="input-group angle-input">
                <label for="holeAzimuth">Hole Azimuth (°):</label>
                <input type="number" id="holeAzimuth" min="0" max="360" step="0.1" value="0" class="angle-number">
                <input type="range" id="holeAzimuthSlider" min="0" max="360" step="0.1" value="0" class="angle-slider">
            </div>
        </div>

        <div id="app">
            <div class="input-section">
                <h2>Measurement</h2>
                <div class="input-group">
                    <label for="depth">Depth (m):</label>
                    <input type="number" id="depth" min="0" step="0.01" value="0">
                </div>
                <div class="depth-buttons">
                    <button class="depth-button" data-amount="-10">-10m</button>
                    <button class="depth-button" data-amount="-1">-1m</button>
                    <button class="depth-button" data-amount="-0.1">-0.1m</button>
                    <button class="depth-button" data-amount="0.1">+0.1m</button>
                    <button class="depth-button" data-amount="1">+1m</button>
                    <button class="depth-button" data-amount="10">+10m</button>
                </div>
                <div class="type-selector"></div>
                <div class="generation-selector"></div>
                <div class="custom-type-selectors"></div>
                <div id="preview"></div>
                <div class="input-group angle-input">
                    <label for="alpha">Alpha (°):</label>
                    <input type="number" id="alpha" min="0" max="90" step="1" value="0" class="angle-number">
                    <input type="range" id="alphaSlider" min="0" max="90" step="1" value="0" class="angle-slider">
                </div>
                <div class="input-group angle-input">
                    <label for="beta">Beta (°):</label>
                    <input type="number" id="beta" min="0" max="360" step="1" value="0" class="angle-number">
                    <input type="range" id="betaSlider" min="0" max="360" step="1" value="0" class="angle-slider">
                </div>
                
                <textarea id="comment" placeholder="Add a comment..."></textarea>
                
                <button id="addMeasurement" class="primary-button">Add Measurement</button>
            </div>

            <div class="results-section">
                <h2>Results</h2>
                <table id="resultsTable">
                    <thead>
                        <!-- Table header will be dynamically generated -->
                    </thead>
                    <tbody>
                        <!-- Table body will be dynamically populated -->
                    </tbody>
                </table>
            </div>
            <div class="action-buttons">
                <button id="copyResults">Copy Results</button>
                <button id="saveAsCSV">Save as CSV</button>
                <button id="clearMeasurements">Clear Measurements</button>
            </div>
        </div>

        <div id="settingsPage" class="hidden">
            <div class="settings-header">
                <button id="backToMain" class="icon-button"><i class="fas fa-arrow-left"></i></button>
                <h2>Settings</h2>
            </div>
            <div class="settings-content">
                <div class="settings-grid">
                    <div class="setting-group">
                        <label for="darkMode">Dark Mode:</label>
                        <input type="checkbox" id="darkMode">
                        <p class="setting-description">Enable dark mode for a more comfortable viewing experience in low-light conditions.</p>
                    </div>
                    <div class="setting-group">
                        <label for="hapticFeedback">Haptic Feedback:</label>
                        <input type="checkbox" id="hapticFeedback">
                        <p class="setting-description">Enable vibration feedback for button presses and other interactions (if supported by your device).</p>
                    </div>
                    <div class="setting-group">
                        <label for="strikeMode">Strike Mode:</label>
                        <select id="strikeMode">
                            <option value="negative">-90° (default)</option>
                            <option value="positive">+90°</option>
                        </select>
                        <p class="setting-description">Choose the strike mode for measurements. -90° is the default, but some geologists prefer +90°.</p>
                    </div>
                    <div class="setting-group">
                        <h3>Reset Application</h3>
                        <button id="resetApp" class="danger-button">Reset All Settings and Data</button>
                        <p class="setting-description">Warning: This will clear all your settings, custom types, and stored measurements. Use with caution!</p>
                    </div>
                </div>
                <div class="setting-group">
                    <label>Measurement Types:</label>
                    <div id="measurementTypes"></div>
                    <button id="addMeasurementType">Add Measurement Type</button>
                    <p class="setting-description">Manage the types of measurements you can record (e.g., Foliation, Lineation). Add custom measurement types as needed.</p>
                </div>
                <div class="setting-group">
                    <label>Generation Types:</label>
                    <div id="generationTypes"></div>
                    <button id="addGenerationType">Add Generation Type</button>
                    <p class="setting-description">Manage generation types to classify measurements (e.g., S1, S2 for different foliation generations).</p>
                </div>
                <div class="setting-group">
                    <label>Custom Types:</label>
                    <div id="customTypes"></div>
                    <button id="addCustomType">Add Custom Type</button>
                    <p class="setting-description">Create and manage custom classification types for your measurements to suit your specific project needs.</p>
                </div>
                <div class="setting-group data-storage-info">
                    <i class="fas fa-info-circle"></i>
                    <p>All data and settings are saved locally on your device. No information is stored in the cloud or on external servers.</p>
                </div>
            </div>
        </div>

        <div id="copyStatus"></div>
        <div id="error"></div>
    </div>
    <footer>
        <span>Done by Janne v.15</span>
        <div class="social-links">
            <a href="https://www.linkedin.com/in/kinnujan/" target="_blank" rel="noopener noreferrer"><i class="fab fa-linkedin"></i></a>
            <a href="https://github.com/kinnujan/drillhole-calculator/" target="_blank" rel="noopener noreferrer"><i class="fab fa-github"></i></a>
            <a href="https://twitter.com/kinnujan" target="_blank" rel="noopener noreferrer"><i class="fab fa-twitter"></i></a>
        </div>
    </footer>
    <script type="module" src="main.js"></script>
</body>
</html>